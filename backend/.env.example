# ==========================================
# PM Document Intelligence - Environment Variables
# ==========================================
# This file documents all required and optional environment variables.
# Copy this file to .env and fill in the values.
# IMPORTANT: Variable names are case-insensitive but shown in recommended format.

# ==========================================
# Application Configuration
# ==========================================
ENVIRONMENT=production  # Options: development, staging, production
DEBUG=false  # Enable debug mode (MUST be false in production)
SECRET_KEY=your-app-secret-key-must-be-at-least-32-characters-long
ALLOWED_HOSTS=*  # Comma-separated list of allowed hosts
CORS_ORIGINS=https://joyofpm.com,https://app.joyofpm.com  # Comma-separated CORS origins

# ==========================================
# AWS Configuration
# ==========================================
AWS_REGION=us-east-1
# AWS credentials (optional if using IAM roles)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_SESSION_TOKEN=your-session-token  # For temporary credentials

# AWS Service Limits
AWS_MAX_CONCURRENT_REQUESTS=100  # Default: 100
AWS_REQUEST_TIMEOUT=300  # Seconds, Default: 300

# ==========================================
# S3 Configuration
# ==========================================
# CRITICAL: Variable name is S3_BUCKET_NAME (NOT AWS_S3_BUCKET)
S3_BUCKET_NAME=your-s3-bucket-name  # REQUIRED - No default value
S3_UPLOAD_PATH=documents/  # S3 path prefix, Default: documents/
S3_PRESIGNED_URL_EXPIRY=3600  # Seconds, Default: 3600 (1 hour)

# ==========================================
# Database Configuration (PostgreSQL/RDS)
# ==========================================
# REQUIRED: PostgreSQL connection URL
DATABASE_URL=postgresql://username:password@host:5432/database_name

# Connection Pool Settings
DATABASE_POOL_SIZE=20  # Default: 20
DATABASE_MAX_OVERFLOW=10  # Default: 10
DATABASE_POOL_RECYCLE=3600  # Seconds, Default: 3600
DATABASE_POOL_PRE_PING=true  # Enable health checks, Default: true
DATABASE_ECHO=false  # Log SQL statements (debug only), Default: false

# ==========================================
# Redis Configuration
# ==========================================
REDIS_URL=redis://host:6379/0  # REQUIRED
# REDIS_PASSWORD=your-redis-password  # Optional
REDIS_MAX_CONNECTIONS=50  # Default: 50
REDIS_SOCKET_TIMEOUT=5  # Seconds, Default: 5
REDIS_SOCKET_CONNECT_TIMEOUT=5  # Seconds, Default: 5

# ==========================================
# Security & Authentication
# ==========================================
# JWT Configuration
JWT_SECRET_KEY=your-jwt-secret-key-must-be-at-least-32-characters  # REQUIRED
JWT_ALGORITHM=HS256  # Default: HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30  # Default: 30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7  # Default: 7

# Password Hashing
BCRYPT_ROUNDS=12  # Default: 12

# API Keys
API_KEY_SALT=your-api-key-salt-min-16-chars  # REQUIRED, min 16 characters
API_KEY_HEADER=X-API-Key  # Default: X-API-Key

# ==========================================
# External Services
# ==========================================
# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key  # REQUIRED
OPENAI_MODEL=gpt-4o-mini  # Default: gpt-4o-mini
OPENAI_MAX_TOKENS=4096  # Default: 4096
OPENAI_TEMPERATURE=0.7  # Default: 0.7
OPENAI_RATE_LIMIT_PER_MINUTE=100  # Default: 100
OPENAI_RATE_LIMIT_PER_DAY=10000  # Default: 10000

# PubNub (Real-time Updates)
PUBNUB_PUBLISH_KEY=your-pubnub-publish-key  # REQUIRED
PUBNUB_SUBSCRIBE_KEY=your-pubnub-subscribe-key  # REQUIRED
PUBNUB_SECRET_KEY=your-pubnub-secret-key  # REQUIRED
PUBNUB_SSL=true  # Default: true
PUBNUB_UUID=pm-document-intelligence-backend  # Default

# ==========================================
# AWS Bedrock (Claude API)
# ==========================================
BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0
BEDROCK_MAX_TOKENS=4096  # Default: 4096
BEDROCK_TEMPERATURE=0.7  # Default: 0.7
BEDROCK_TOP_P=0.9  # Default: 0.9
BEDROCK_REGION=us-east-1  # Default: us-east-1
BEDROCK_RATE_LIMIT_PER_MINUTE=60  # Default: 60
BEDROCK_RATE_LIMIT_PER_HOUR=1000  # Default: 1000

# ==========================================
# AWS Textract Configuration
# ==========================================
TEXTRACT_ENABLED=true  # Default: true
TEXTRACT_MAX_PAGES=100  # Default: 100
TEXTRACT_TIMEOUT=300  # Seconds, Default: 300

# ==========================================
# AWS Comprehend Configuration
# ==========================================
COMPREHEND_ENABLED=true  # Default: true
COMPREHEND_MAX_TEXT_LENGTH=100000  # Bytes, Default: 100000
COMPREHEND_LANGUAGE_CODE=en  # Default: en

# ==========================================
# Caching Configuration
# ==========================================
CACHE_ENABLED=true  # Default: true
CACHE_TYPE=redis  # Options: redis, memory; Default: redis
CACHE_DEFAULT_TTL=3600  # Seconds, Default: 3600
CACHE_MAX_SIZE=1000  # Memory cache only, Default: 1000

# Specific cache TTLs
CACHE_DOCUMENT_TTL=7200  # Seconds, Default: 7200
CACHE_ANALYSIS_TTL=3600  # Seconds, Default: 3600
CACHE_QUERY_TTL=1800  # Seconds, Default: 1800

# ==========================================
# Rate Limiting
# ==========================================
RATE_LIMIT_ENABLED=true  # Default: true
RATE_LIMIT_STRATEGY=fixed-window  # Options: fixed-window, sliding-window
RATE_LIMIT_DEFAULT=100/minute  # Default: 100/minute
RATE_LIMIT_STORAGE=redis  # Options: redis, memory; Default: redis

# Per-endpoint rate limits
RATE_LIMIT_UPLOAD=10/minute  # Default: 10/minute
RATE_LIMIT_PROCESS=20/minute  # Default: 20/minute
RATE_LIMIT_QUERY=100/minute  # Default: 100/minute

# ==========================================
# Monitoring & Logging
# ==========================================
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # Options: json, text; Default: json
LOG_FILE=logs/app.log  # Default: logs/app.log
LOG_ROTATION=10MB  # Default: 10MB
LOG_RETENTION=30 days  # Default: 30 days

# Sentry (Error Tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENABLED=false  # Default: true (set to false if no DSN)
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1  # Default: 0.1 (10%)
SENTRY_PROFILES_SAMPLE_RATE=0.1  # Default: 0.1 (10%)

# Prometheus Metrics
METRICS_ENABLED=true  # Default: true
METRICS_PORT=9090  # Default: 9090
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus  # Default: /tmp/prometheus

# ==========================================
# Server Configuration
# ==========================================
HOST=0.0.0.0  # Default: 0.0.0.0
PORT=8000  # Default: 8000
WORKERS=4  # Number of worker processes, Default: 4
RELOAD=false  # Auto-reload (development only), Default: false

# ==========================================
# File Upload Configuration
# ==========================================
UPLOAD_DIR=uploads  # Default: uploads
MAX_UPLOAD_SIZE=52428800  # Bytes (50MB), Default: 52428800
ALLOWED_EXTENSIONS=pdf,docx,doc,txt,xlsx,xls,pptx,ppt  # Comma-separated

# ==========================================
# Document Processing
# ==========================================
MAX_CONCURRENT_PROCESSING=5  # Default: 5
PROCESSING_TIMEOUT=600  # Seconds, Default: 600
OCR_ENABLED=true  # Default: true
NER_ENABLED=true  # Named Entity Recognition, Default: true
SENTIMENT_ANALYSIS_ENABLED=true  # Default: true
KEY_PHRASE_EXTRACTION_ENABLED=true  # Default: true

# ==========================================
# Vector Search Configuration
# ==========================================
VECTOR_DB_TYPE=pgvector  # Options: pgvector, pinecone, weaviate
VECTOR_DIMENSION=1536  # Default: 1536 (OpenAI embedding dimension)
VECTOR_SIMILARITY_THRESHOLD=0.7  # Default: 0.7
EMBEDDING_MODEL=text-embedding-3-small  # Default: text-embedding-3-small

# ==========================================
# Agent Configuration
# ==========================================
AGENT_MAX_ITERATIONS=10  # Default: 10
AGENT_TIMEOUT=300  # Seconds, Default: 300
AGENT_MEMORY_ENABLED=true  # Default: true
AGENT_TOOLS_ENABLED=textract,comprehend,search,summarize,analyze

# ==========================================
# MCP (Model Context Protocol)
# ==========================================
MCP_ENABLED=true  # Default: true
MCP_SERVER_PORT=8001  # Default: 8001
MCP_MAX_CONTEXT_LENGTH=100000  # Default: 100000
MCP_TOOLS_ENABLED=true  # Default: true

# ==========================================
# Feature Flags
# ==========================================
FEATURE_CACHING_ENABLED=true  # Default: true
FEATURE_VECTOR_SEARCH_ENABLED=true  # Default: true
FEATURE_MULTI_MODAL_ENABLED=true  # Default: true
FEATURE_REAL_TIME_UPDATES_ENABLED=true  # Default: true
FEATURE_BATCH_PROCESSING_ENABLED=true  # Default: true
FEATURE_ADVANCED_ANALYTICS_ENABLED=false  # Default: false

# ==========================================
# Production Optimizations
# ==========================================
GZIP_ENABLED=true  # Default: true
GZIP_MIN_SIZE=1000  # Bytes, Default: 1000
COMPRESSION_LEVEL=6  # 1-9, Default: 6

# ==========================================
# Health Checks
# ==========================================
HEALTH_CHECK_ENABLED=true  # Default: true
HEALTH_CHECK_PATH=/health  # Default: /health
READINESS_CHECK_PATH=/ready  # Default: /ready

# ==========================================
# Testing Configuration
# ==========================================
TESTING=false  # Enable testing mode, Default: false
# TEST_DATABASE_URL=postgresql://user:pass@localhost:5432/test_db
MOCK_AWS_SERVICES=false  # Mock AWS for testing, Default: false
ENABLE_PROFILING=false  # Performance profiling, Default: false
